require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var controllers=require("automation/controllers"),directives=require("automation/directives"),adapter=require("automation/adapter");module.exports=angular.module("automation",["ui.bootstrap","automation.controllers","automation.directives","automation.adapter"]);
},{"automation/adapter":"UOS8QZ","automation/controllers":"lq1gDp","automation/directives":"F79/c7"}],"automation/adapter":[function(require,module,exports){
module.exports=require('UOS8QZ');
},{}],"UOS8QZ":[function(require,module,exports){
module.exports=angular.module("automation.adapter",[]).run(["$rootScope","$document",function(o,n){var t=function(o){var t=Array.prototype.slice.call(arguments,1);n.trigger(o.name,t)},a=function(n){var t=Array.prototype.slice.call(arguments,1);t.unshift(n.type),o.$broadcast.apply(o,t)};n.on("load-defaults",function(o){a(o)}),n.on("update-room",function(o,n,t){a(o,n,t)}),n.on("update-zone",function(o,n,t){a(o,n,t)}),o.$on("defaults-loaded",function(o,n){t(o,n)}),o.$on("defaults-load-error",function(o,n){t(o,n)}),o.$on("room-updated",function(o,n,a){t(o,n,a)}),o.$on("room-update-error",function(o,n,a){t(o,n,a)}),o.$on("zone-updated",function(o,n,a){t(o,n,a)}),o.$on("zone-update-error",function(o,n,a){t(o,n,a)})}]);
},{}],"A86jH9":[function(require,module,exports){
module.exports=angular.module("automation.config",[]).value("defaultsUrl","/aem-example/bin/house/defaults.json").value("roomSetUrl","/aem-example/bin/house/room.json").value("zoneSetUrl","/aem-example/bin/house/zone.json").value("lightsOnUrl","/aem-example/bin/house/lights/on.json").value("lightsOffUrl","/aem-example/bin/house/lights/off.json").value("temperatureSetUrl","/aem-example/bin/house/temperature/set.json");
},{}],"automation/config.gh-pages":[function(require,module,exports){
module.exports=require('A86jH9');
},{}],"T2ncs/":[function(require,module,exports){
module.exports=angular.module("automation.config",[]).value("defaultsUrl","/bin/house/defaults.json").value("roomSetUrl","/bin/house/room.json").value("zoneSetUrl","/bin/house/zone.json").value("lightsOnUrl","/bin/house/lights/on.json").value("lightsOffUrl","/bin/house/lights/off.json").value("temperatureSetUrl","/bin/house/temperature/set.json");
},{}],"automation/config":[function(require,module,exports){
module.exports=require('T2ncs/');
},{}],"lq1gDp":[function(require,module,exports){
var services=require("automation/services");module.exports=angular.module("automation.controllers",["automation.services"]).controller("AutomationCtrl",["$rootScope","$scope","DefaultsService",function(o,e,n){e.rooms={},e.zones={},e.temperatures=[{label:"15°C",value:15},{label:"16°C",value:16},{label:"17°C",value:17},{label:"18°C",value:18},{label:"19°C",value:19},{label:"20°C",value:20},{label:"21°C",value:21},{label:"22°C",value:22},{label:"23°C",value:23},{label:"24°C",value:24},{label:"25°C",value:25}],e.loadDefaults=function(){n.getDefaults().success(function(n){var a,t;e.zones=n.zones,e.rooms=n.rooms,o.$broadcast("defaults-loaded",n);for(a in e.rooms)e.rooms.hasOwnProperty(a)&&e.updateRoom(a,!0);for(t in e.zones)e.zones.hasOwnProperty(t)&&e.updateZone(t,!0)}).error(function(e,n,a,t){o.$broadcast("defaults-load-error",{data:e,status:n,headers:a,config:t})})},e.loadDefaults(),e.$on("load-defaults",function(){e.loadDefaults()}),e.$on("zone-updated",function(o,n,a){console.log(n,a),e.zones[n]=a}),e.$on("room-updated",function(o,n,a){console.log(n,a),e.rooms[n]=a}),e.updateZone=function(o,n){e.$broadcast("update-zone",o,e.zones[o],n)},e.updateRoom=function(o,n){e.$broadcast("update-room",o,e.rooms[o],n)}}]).controller("RoomCtrl",["$element","$rootScope","$scope","RoomService",function(o,e,n,a){n.name=n.name||o.attr("id"),n.room={lights:!1,curtains:!1},!n.initialized&&n.rooms&&n.rooms[n.name]&&(n.room=n.rooms[n.name],n.initialized=!0),n.toggleLights=function(){var o=Object.create(n.room);o.lights=!o.lights,n.setRoom(n.name,o)},n.$on("update-room",function(o,a,t,r){if(n.name===a){if(void 0===t)return e.$broadcast("room-update-error",a,{data:"room object cannot be undefined",status:"400",headers:void 0,config:void 0}),void(console&&console.error&&console.error("Error handling update-room: Room object cannot be undefined"));r?(n.room=t,e.$broadcast("room-updated",a,t)):n.setRoom(a,t)}}),n.setRoom=function(o,t){var r=n.room;n.room.lights=void 0,a.setRoom(o,t).success(function(){n.room.lights=t.lights,e.$broadcast("room-updated",o,t)}).error(function(a,t,s,d){e.$broadcast("room-update-error",o,{data:a,status:t,headers:s,config:d}),n.room=r})}}]).controller("ZoneCtrl",["$element","$rootScope","$scope","ZoneService",function(o,e,n,a){n.name=n.name||o.attr("id"),n.zone={fan:!1,temperature:20},!n.initialized&&n.zones&&n.zones[n.name]&&(n.zone=n.zones[n.name],n.initialized=!0),n.$on("update-zone",function(o,a,t,r){if(n.name==a){if(void 0===t)return e.$broadcast("zone-update-error",a,{data:"zone object cannot be undefined",status:"400",headers:void 0,config:void 0}),void(console&&console.error&&console.error("Error handling update-zone: Zone object cannot be undefined"));r?(n.zone=t,e.$broadcast("zone-updated",a,n.zone)):n.updateZone(t)}}),n.updateZone=function(o){var t=n.zone;a.setZone(n.name,o).success(function(){n.zone=o,e.$broadcast("zone-updated",n.name,n.zone)}).error(function(o,a,r,s){e.$broadcast("zone-update-error",n.name,{data:o,status:a,headers:r,config:s}),n.zone=t})}}]);
},{"automation/services":"+c2s+C"}],"automation/controllers":[function(require,module,exports){
module.exports=require('lq1gDp');
},{}],"F79/c7":[function(require,module,exports){
module.exports=angular.module("automation.directives",[]).directive("floorplan",["$window",function(e){return{restrict:"E",transclude:!1,controller:["$scope","$element",function(t,o){t.lastHeight=void 0;var n=e.onresize;e.onresize=function(){t.resizeFloorplan(),"function"==typeof n&&n.apply(e,arguments)},t.resizeFloorplan=function(){var e=o.find("svg"),n=.6*e[0].offsetWidth+"px";n!=t.lastHeight&&(e.css("height",n),t.lastHeight=n)}}],templateUrl:"partials/floorplan.html"}}]);
},{}],"automation/directives":[function(require,module,exports){
module.exports=require('F79/c7');
},{}],"+c2s+C":[function(require,module,exports){
var config=require("automation/config.gh-pages");module.exports=angular.module("automation.services",["automation.config"]).factory("DefaultsService",["$http","defaultsUrl",function(r,t){var e={};return e.getDefaults=function(){return r({method:"GET",url:t})},e}]).factory("RoomService",["$http","roomSetUrl",function(r,t){var e={};return e.setRoom=function(e,n){return r({method:"GET",url:t,params:{name:e,lights:n.lights,curtains:n.curtains}})},e}]).factory("LightsService",["$http","lightsOffUrl","lightsOnUrl",function(r,t,e){var n={};return n.turnOff=function(e){return r({method:"GET",url:t,params:{room:e}})},n.turnOn=function(t){return r({method:"GET",url:e,params:{room:t}})},n}]).factory("ZoneService",["$http","zoneSetUrl",function(r,t){var e={};return e.setZone=function(e,n){return r({method:"GET",url:t,params:{name:e,temperature:n.temperature,fan:n.fan}})},e}]).factory("TemperatureService",["$http","temperatureSetUrl",function(r,t){var e={};return e.setTemperature=function(e,n){return r({method:"GET",url:t,params:{zone:e,temperature:n}})},e}]);
},{"automation/config":"T2ncs/"}],"automation/services":[function(require,module,exports){
module.exports=require('+c2s+C');
},{}]},{},[1])
;