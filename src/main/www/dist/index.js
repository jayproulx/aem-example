;(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
angular.module("index",["automation"]),$(function(){function t(){this.data=void 0;var t=n.find(".btn.reset");t.on("click",function(){this.log("User reset the automation API data to defaults"),o.trigger("load-defaults")}.bind(this))}var e,o=$(document),n=$("#modalAPIConsumer"),a=n.find(".all-rooms"),i=n.find(".all-zones"),d=$($("#room-template").text()),r=$($("#zone-template").text());t.prototype.log=function(t){$.get("/bin/logging.json",{message:t,time:(new Date).getTime()})},t.prototype.setData=function(t){t&&(this.data=t,this.render(this.data.rooms,a,d,this.updateRoom),this.render(this.data.zones,i,r,this.updateZone))},t.prototype.updateRoom=function(t,e,n){if(0!==t.length){var a=t.find(".btn.lights"),i=t.find(".room-name");i.text(e),a.off("click"),n.lights?a.addClass("active"):a.removeClass("active"),a.on("click",function(){var t=Object.create(n);t.lights=!t.lights,this.log("User updated room "+i.text()),o.trigger("update-room",[i.text(),t])}.bind(this))}},t.prototype.updateZone=function(t,e,n){if(0!==t.length){var a=t.find(".zone-name"),i=t.find(".dropdown-menu li a"),d=t.find(".current-temperature");i.parent().removeClass("disabled"),i.off("click"),a.text(e),d.text(n.temperature),i.filter(function(){return $(this).data("temp")===n.temperature}).parent().addClass("disabled"),i.on("click",function(){var t=Object.create(n);t.temperature=$(this).data("temp"),this.log("User updated zone "+a.text()),o.trigger("update-zone",[a.text(),t])}.bind(this))}},t.prototype.render=function(t,e,o,n){var a;if(e.empty(),t)for(a in t)t.hasOwnProperty(a)&&this.renderItem(a,t[a],e,o,n)},t.prototype.renderItem=function(t,e,o,n,a){var i=n.clone().addClass(t);o.append(i),a&&a(i,t,e)},e=new t,o.on("defaults-loaded",function(t,o){e.log("Defaults were loaded successfully"),e.setData(o)}),o.on("room-updated",function(t,o,n){e.log("Room "+o+" was updated successfully"),e.updateRoom($(".room-template."+o),o,n)}),o.on("zone-updated",function(t,o,n){e.log("Zone "+o+" was updated successfully"),e.updateZone($(".zone-template."+o),o,n)})});
},{}]},{},[1])
;